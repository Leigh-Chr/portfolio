---
import contactsData from "@/data/contacts.json";
import Icon from "@/components/atoms/icon.astro";
// Import obsolète supprimé - effets uniformes maintenant

type ContactItem = {
  address?: string;
  username?: string;
  label: string;
  url: string;
  icon: "mail" | "linkedin" | "github" | "twitter";
};

const { email, linkedin, github } = contactsData;
const contactsList = [email, linkedin, github] as ContactItem[];
---

<div class="contact-info">
  {
    contactsList.map((contact, index) => {
      // Système de rotation obsolète supprimé

      return (
        <div
          class="contact-item surface"
          data-scroll-animate
          data-delay={100 + index * 50}
        >
          <div class="contact-item__icon">
            <Icon name={contact.icon} ariaLabel={contact.label} />
          </div>
          <a
            href={contact.url}
            target={contact.url.startsWith("mailto:") ? "_self" : "_blank"}
            rel="noopener noreferrer"
            class="contact-item__link"
            aria-label={`Contacter via ${contact.label} : ${contact.username || contact.address}`}
          >
            {contact.username || contact.address}
          </a>
        </div>
      );
    })
  }
</div>

<style>
  .contact-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
  }

  .contact-item {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-lg);
    border-radius: var(--border-radius);
    transition: all var(--transition-fast);
    will-change: transform, box-shadow;
    position: relative;
    overflow: hidden;
  }
  .contact-item__icon {
    color: var(--color-primary);
    flex-shrink: 0;
    font-size: var(--font-size-subtitle);
    transition: all var(--transition-fast);
    will-change: transform, color;
  }

  .contact-item__link {
    color: var(--color-on-surface);
    text-decoration: none;
    transition: color var(--transition-fast);
    font-weight: var(--font-weight-semibold);
  }

  /* Responsive Contact Info */
  @media (max-width: 768px) {
    .contact-info {
      grid-template-columns: 1fr;
      gap: var(--space-md);
    }

    .contact-item {
      padding: var(--space-md);
    }
  }
</style>
