---
import { getSkillUrl } from "@/utils/urls";
// Import obsolète supprimé - effets uniformes maintenant
import { skillIcons } from "@/data/skill-icons";
import IconSvg from "@/components/atoms/icon-svg.astro";

interface Props {
  id: string;
  name: string;
  type: string;
}

const { id, name, type } = Astro.props;
// Système de rotation obsolète supprimé

const iconSvg = skillIcons[id as keyof typeof skillIcons];
---

<a
  href={getSkillUrl(id)}
  class="card card--skill surface surface--card-scale"
  transition:name={`skill-card-${id}`}
  data-astro-prefetch="hover"
  aria-label={`Voir la compétence ${name} de type ${type}`}
>
  <div class="card__icon">
    {iconSvg && <IconSvg name={iconSvg} size={56} />}
  </div>
  <div class="card__content">
    <h3 class="card__title">{name}</h3>
  </div>
</a>

<style>
  .card {
    border-radius: var(--border-radius);
    padding: var(--space-lg);
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .card--skill {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    height: 100%;
  }

  .card__icon {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-sm);
    color: var(--color-primary);
    transition: all var(--transition-fast);
    will-change: transform, color;
  }

  .card--skill:hover .card__icon {
    color: var(--color-primary-variant);
    transform: scale(1.1) rotate(3deg);
  }

  .card__content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .card__title {
    margin: 0;
    color: var(--color-on-background);
    font-size: var(--font-size-subtitle);
    font-weight: var(--font-weight-semibold);
    transition: color var(--transition-fast);
  }

  .card--skill:hover .card__title {
    color: var(--color-primary);
  }

  .card:focus-visible {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
    border-radius: var(--border-radius);
  }

  /* Effet hover uniforme et subtil */
  .card--skill:hover {
    transform: translate3d(0, -4px, 0) scale(1.02);
    box-shadow: var(--glass-shadow-hover);
    border: var(--glass-border-hover);
  }

  /* Responsive Skill Cards - Solution ultime */
  @media (max-width: 480px) {
    .card {
      padding: var(--space-md);
    }

    .card--skill h3 {
      font-size: var(--font-size-base);
    }
  }
</style>
