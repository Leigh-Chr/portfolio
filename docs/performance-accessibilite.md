# Performance et accessibilit√©

## ‚ö° Optimisations de performance

### M√©triques cibles
- **Lighthouse Performance** : 95+
- **First Contentful Paint** : < 1.2s
- **Largest Contentful Paint** : < 2.5s
- **Cumulative Layout Shift** : < 0.1

## üöÄ Strat√©gies de performance

### 1. G√©n√©ration statique
- **Astro SSG** : Toutes les pages g√©n√©r√©es au build
- **Aucun JavaScript** c√¥t√© client par d√©faut
- **HTML/CSS optimis√©s** automatiquement

### 2. Optimisation des ressources

#### Images
```astro
import { Image } from "astro:assets";

<!-- Optimisation automatique des formats et tailles -->
<Image 
  src={portrait} 
  alt="Portrait professionnel" 
  width={320} 
  height={320}
  loading="eager"  <!-- Critical images -->
/>
```

#### Polices
```html
<!-- Preload des polices critiques -->
<link rel="preload" 
      href="https://fonts.googleapis.com/.../Inter:wght@300;400;500;600;700" 
      as="style" />

<!-- Connexions pr√©√©tablies -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
```

#### CSS critique
```html
<style is:inline>
  :root {
    --color-primary: oklch(0.8 0.4 380);
    --color-background: oklch(from var(--color-primary) 0.12 calc(c * 0.02) h);
  }
  body {
    background: var(--color-background);
    color: var(--color-on-background);
  }
</style>
```

### 3. Pr√©chargement intelligent
```astro
<!-- Pr√©chargement au hover -->
<a href={getProjectUrl(id)} data-astro-prefetch="hover">

<!-- DNS prefetch pour ressources externes -->
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
```

### 4. Optimisation des animations
```css
/* Syst√®me de timing unifi√© */
:root {
  --timing-fast: 0.2s;      /* Hover, focus, interactions rapides */
  --timing-normal: 0.4s;    /* Scroll animations, apparitions */
  --timing-slow: 0.6s;      /* View transitions, changements majeurs */
  --timing-background: 20s; /* Animations de fond continues */
  
  --easing-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);  /* Fluide et naturel */
  --easing-punk: cubic-bezier(0.4, 0, 0.2, 1);             /* Style punk coh√©rent */
}

/* Animations GPU-acc√©l√©r√©es */
[data-scroll-animate] {
  transform: translate3d(0, 20px, 0); /* Acc√©l√©ration mat√©rielle */
  transition: all var(--timing-normal) var(--easing-smooth);
  will-change: transform, opacity;
}

/* Cursor trail optimis√© */
.cursor-trail {
  transform: translate3d(0, 0, 0); /* Acc√©l√©ration mat√©rielle */
  transition: all var(--timing-fast) var(--easing-smooth);
  mix-blend-mode: screen;          /* Effet de fusion moderne */
}

/* Respect des pr√©f√©rences utilisateur */
@media (prefers-reduced-motion: reduce) {
  [data-scroll-animate] {
    transition: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}
```

### 5. Intersection Observer pour animations
Le `ScrollAnimator` utilise l'API moderne pour des performances optimales :

```typescript
// Configuration optimis√©e
this.observer = new IntersectionObserver(
  this.handleIntersection.bind(this),
  {
    threshold: 0.2,           // 20% de visibilit√© (plus r√©actif)
    rootMargin: "50px",       // D√©clenchement anticip√© optimis√©
  }
);

// D√©lais progressifs optimis√©s
scheduleAnimation(element: HTMLElement, delay: number, priority: number) {
  const baseDelay = delay;
  const priorityDelay = priority * 25; // 25ms par niveau (r√©duit de 50ms)
  const totalDelay = baseDelay + priorityDelay;
  // ...
}
```

## ‚ôø Accessibilit√© WCAG 2.1 AA

### Conformit√© cible
- **Score Lighthouse Accessibility** : 100/100
- **Niveau WCAG** : AA (objectif AAA sur certains crit√®res)
- **Tests** : Lecteurs d'√©cran, navigation clavier, contraste

## üéØ Impl√©mentations d'accessibilit√©

### 1. Navigation au clavier
```astro
<!-- Focus visible am√©lior√© -->
<style>
  .btn:focus-visible {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
  }
</style>

<!-- Skip links -->
<a href="#main-content" class="skip-link">Aller au contenu principal</a>
```

### 2. ARIA et s√©mantique
```astro
<!-- Navigation avec r√¥les ARIA -->
<nav aria-label="Navigation principale">
  <ul role="list">
    <li><a href="/competences" aria-current="page">Comp√©tences</a></li>
  </ul>
</nav>

<!-- Boutons accessibles -->
<button 
  aria-expanded="false" 
  aria-controls="nav-mobile-overlay"
  aria-label="Ouvrir le menu de navigation"
>
```

### 3. Contraste des couleurs
```css
:root {
  /* Couleurs calcul√©es pour respecter WCAG AA */
  --color-primary: oklch(0.80 0.4 380);
  --color-background: oklch(from var(--color-primary) 0.12 calc(c * 0.02) h);
  
  /* Focus haute visibilit√© pour WCAG AAA */
  --focus-ring-high: 0.1875rem solid var(--color-primary);
}

/* Support du contraste √©lev√© */
@media (prefers-contrast: high) {
  :root {
    --color-primary: oklch(0.9 0.5 380);
    --color-border: oklch(0.3 0.1 380);
  }
}
```

### 4. Textes alternatifs
```astro
<!-- Images avec alt descriptifs -->
<Image 
  src={portrait} 
  alt="Portrait professionnel de Virgil CHAREYRE, d√©veloppeur web souriant"
  width={320} 
  height={320}
/>

<!-- Ic√¥nes d√©coratives -->
<IconSvg name="angular" aria-hidden="true" />

<!-- Liens avec contexte -->
<a 
  href={getProjectUrl(id)} 
  aria-label={`Voir le projet ${title} - ${summary}`}
>
```

### 5. Responsive et zoom
```css
/* Support du zoom jusqu'√† 200% */
@media (max-width: 480px) {
  .btn {
    min-height: 44px;  /* Taille tactile minimum */
    min-width: 44px;
  }
}

/* Texte responsive sans d√©bordement */
p, h1, h2, h3, h4, h5, h6 {
  overflow-wrap: break-word;
}

p { text-wrap: pretty; }
h1, h2, h3, h4, h5, h6 { text-wrap: balance; }
```

## üß™ Tests et validation

### Tests automatis√©s
- **aXe DevTools** : Audit automatique d'accessibilit√©
- **Lighthouse CI** : Tests de performance en continu
- **Wave** : Validation des contrastes et ARIA

### Tests manuels
- **Navigation clavier** : Tab, Enter, Espace, fl√®ches
- **Lecteurs d'√©cran** : NVDA, JAWS, VoiceOver
- **Zoom** : Test jusqu'√† 200% sans perte de fonctionnalit√©

### Outils de d√©veloppement
```typescript
// Configuration TypeScript stricte pour la qualit√©
{
  "extends": "astro/tsconfigs/strict",
  "compilerOptions": {
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "exactOptionalPropertyTypes": true
  }
}
```

## üìä M√©triques et monitoring

### Core Web Vitals
- **LCP** : Optimis√© par images eager et CSS critique
- **FID** : Minimal gr√¢ce √† l'approche statique
- **CLS** : √âvit√© par dimensionnement explicite des images

### Outils de mesure
- **Lighthouse** : Audits automatis√©s
- **WebPageTest** : Tests de performance d√©taill√©s
- **Google Search Console** : Monitoring Core Web Vitals

### Optimisations continues
```css
/* Optimisation des reflows */
.logo__portrait {
  width: 50px;
  height: 50px;  /* Dimensions explicites */
  border-radius: 50%;
  object-fit: cover;
}

/* Optimisation des repaints */
.cursor-trail {
  transform: translateZ(0);  /* Nouveau contexte de stacking */
  will-change: transform, opacity;
}
```

## üåç √âco-conception

### Strat√©gies de sobri√©t√© num√©rique
- **Poids optimis√©** : Images WebP, CSS minifi√©
- **Requ√™tes r√©duites** : G√©n√©ration statique, pas d'API
- **Animations responsables** : Respect des pr√©f√©rences utilisateur
- **Code minimal** : Suppression des composants inutiles

### M√©triques environnementales
- **EcoIndex** : Objectif A/B
- **Carbon footprint** : Minimis√© par l'h√©bergement statique
- **Data transfer** : Optimis√© par Astro et les CDN

---

**R√©f√©rences** :
- [Architecture g√©n√©rale](architecture-generale.md)
- [Syst√®me de styles](systeme-styles.md)
- [Syst√®me d'animations](systeme-animations.md)
